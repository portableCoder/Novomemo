"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[959],{90959:function(e,t,l){l.r(t),l.d(t,{default:function(){return O}});var s,a,i=l(9268),d=l(51213),n=l.n(d),r=l(15718),c=l(86006),o=l(72875),x=l(30308),u=l(45659),f=l(60644),h=l(86902),m=l.n(h),j=l(93432),p=l.n(j);m().extend(p());var v=m(),g=l(14453),N=l(40321),b=l(3532),w=l(9384),y=l(69888),E=l(56844),C=e=>{let{items:t,selectedItems:l,fixed:s}=e,[a,d]=(0,c.useState)(t.map(e=>!1));return(0,c.useEffect)(()=>{l&&l(t.filter((e,t)=>a[t]))},[a]),(0,i.jsx)(i.Fragment,{children:t.map((e,t)=>(0,i.jsx)("button",{onClick:()=>{if(!s){let e=[...a];e[t]=!e[t],d(e)}},className:"py-2 px-8 rounded-3xl text-white  ".concat(a[t]?"border-4  border-indigo-500":" border-4 border-zinc-600"," "),children:e},t))})};(s=a||(a={}))[s.ADD_NOTE=0]="ADD_NOTE",s[s.ALL_NOTES=1]="ALL_NOTES",s[s.FAVORITES=2]="FAVORITES",s[s.ARCHIVE=3]="ARCHIVE";var S=l(36738),A=()=>{let{value:e,set:t}=(0,S.Z)("notes",{defaultValue:[],initializeWithValue:!0});return{localNotes:e,setLocalNotes:t}},k=e=>{let{note:t}=e,l=[[g.Z,t.favorite,"Favorite"],["MD","markdown"===t.editor,"Markdown"],[N.Z,"wysiwyg"===t.editor,"Editor"],[b.Z,t.archived,"Archived"]],[s,d,n,r,c,o,u,f,h]=(0,x.Z)(e=>[e.notes,e.setEditingNote,e.setSelectedMode,e.setIsViewing,e.isEditing,e.setEditing,e.supabase,e.localMode,e.setNotes]),{localNotes:m,setLocalNotes:j}=A();return(0,i.jsxs)("div",{className:" bg-zinc-800 justify-between   outline-zinc-700 outline outline-2 text-white rounded-md w-full flex  p-2",children:[(0,i.jsxs)("div",{className:"flex flex-col gap-y-3",children:[(0,i.jsx)("div",{className:"text-3xl font-semibold ",children:t.title}),(0,i.jsx)("div",{className:"flex gap-x-3 flex-wrap gap-y-3",children:(0,i.jsx)(C,{fixed:!0,items:t.labels})}),(0,i.jsxs)("div",{className:"flex gap-x-3 text-sm",children:[(0,i.jsxs)("div",{className:"text-zinc-400",children:["Created ",new Date(t.created).toLocaleDateString()]}),(0,i.jsx)("div",{className:"text-zinc-500",children:"â€¢ ".concat(v().to(new Date(t.created)))})]}),(0,i.jsx)("div",{className:"flex w-full h-full items-end justify-start gap-x-3",children:l.map((e,t)=>{let[l,s,a]=e;if(s)return(0,i.jsxs)("div",{className:"flex flex-col items-center justify-center text-sm",children:[(0,i.jsx)("div",{children:"string"==typeof l?l:(0,i.jsx)(l,{})}),a]},t)})})]}),(0,i.jsxs)("div",{className:"flex flex-col gap-y-3",children:[(0,i.jsx)("button",{onClick:()=>{d(s.findIndex(e=>e.id===t.id)),r(!0),n(a.ADD_NOTE)},children:(0,i.jsx)(w.Z,{})}),(0,i.jsx)("button",{onClick:()=>{d(s.findIndex(e=>e.id===t.id)),o(!0),n(a.ADD_NOTE)},children:(0,i.jsx)(y.Z,{})}),(0,i.jsx)("button",{onClick:async()=>{let e=s.filter(e=>e.id!==t.id);f?(j(e),h(e)):(await u.from("Notes").delete().eq("id",t.id),h(e))},children:(0,i.jsx)(E.Z,{})}),(0,i.jsx)("button",{onClick:async()=>{let e={...t},l=[...s];e.archived=!e.archived;let a=l.findIndex(t=>t.id===e.id);l[a]=e,f?(j(l),h(s)):(await u.from("Notes").update({data:e}).match({id:e.id}),h(l))},children:(0,i.jsx)(b.Z,{})})]})]})},D=l(66442),Z=l(10184),I=()=>(0,i.jsx)("div",{className:"border border-zinc-600 shadow rounded-md p-4  w-full mx-auto",children:(0,i.jsx)("div",{className:"animate-pulse flex space-x-4",children:(0,i.jsxs)("div",{className:"flex-1 space-y-6 py-1",children:[(0,i.jsx)("div",{className:"h-2 bg-slate-700 rounded"}),(0,i.jsxs)("div",{className:"space-y-3",children:[(0,i.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,i.jsx)("div",{className:"h-2 bg-slate-700 rounded col-span-2"}),(0,i.jsx)("div",{className:"h-2 bg-slate-700 rounded col-span-1"})]}),(0,i.jsx)("div",{className:"h-2 bg-slate-700 rounded"})]})]})})}),T=l(6266),_=e=>{let{labels:t,onChange:l,onSelectChange:s}=e;return(0,i.jsxs)("div",{className:"flex flex-col gap-y-3",children:[(0,i.jsx)("div",{children:(0,i.jsxs)("div",{className:"flex gap-x-3",children:[(0,i.jsx)(T.Z,{}),"Filters"]})}),(0,i.jsx)("div",{children:(0,i.jsxs)("div",{className:"w-full flex flex-col gap-y-2",children:[(0,i.jsx)("div",{children:" Filter by labels "}),(0,i.jsx)("div",{className:"flex gap-3 flex-wrap",children:(0,i.jsx)(C,{items:t,selectedItems:l})})]})}),(0,i.jsx)("div",{children:"Sort by:"}),(0,i.jsx)("div",{className:"flex flex-col gap-y-2",children:(0,i.jsxs)("select",{onChange:e=>{s(e.target.value)},id:"sort",className:"bg-transparent p-4 rounded-md outline outline-2 outline-zinc-800 w-min active:outline-indigo-500 focus:outline-indigo-500",children:[(0,i.jsx)("option",{value:"",children:"--Choose an option--"}),(0,i.jsx)("option",{value:"da",children:"Date: Newest"}),(0,i.jsx)("option",{value:"dd",children:"Date: Oldest"}),(0,i.jsx)("option",{value:"ta",children:"Title: Ascending"}),(0,i.jsx)("option",{value:"td",children:"Title: Descending"})]})})]})};let z=n()(()=>Promise.all([l.e(265),l.e(180),l.e(376)]).then(l.bind(l,30376)),{loadableGenerated:{webpack:()=>[30376]},ssr:!1});var O=()=>{let e=(0,x.Z)(e=>e.selectedMode);(0,c.useEffect)(()=>{0==e?document.body.classList.add("overflow-hidden"):document.body.classList.remove("overflow-hidden")},[e]);let t=(0,f.q_)({x:0===e?0:2500}),[l,s,d,n,h]=(0,x.Z)(e=>{let{session:t,supabase:l,localMode:s,notes:a,setNotes:i}=e;return[t,l,s,a,i]}),[m,j]=(0,c.useState)(!1),{localNotes:p}=A();(0,c.useEffect)(()=>{d&&!l&&p&&h(p)},[p,m]),(0,c.useEffect)(()=>{(async function(){if(l&&!d){let{user:e}=l;V(!0);let{data:t,error:a}=await s.from("Notes").select("id,data").eq("uid",e.id);t&&h(t.map(e=>({...e.data,id:e.id}))),a&&M("Error fetching data.."),V(!1)}})()},[l,m]);let[v,g]=(0,c.useState)(""),[N,b]=(0,c.useState)([]),[w,y]=(0,c.useState)([]);(0,D.b)(()=>{if(""==v)y(n);else{let e=new Z.Z(n,{keys:["title"]}),t=e.search(v),l=t.map(e=>e.item);y(l)}},[n,v],200);let E=(0,c.useCallback)(t=>{switch(e){case a.ALL_NOTES:return!t.archived;case a.ARCHIVE:return t.archived;case a.FAVORITES:return t.favorite;default:return!0}},[e]),[C,S]=(0,c.useState)(""),T=(0,c.useCallback)((e,t)=>{switch(C){case"da":if(e.created>t.created)return -1;if(t.created>e.created)return 1;return 0;case"dd":if(e.created<t.created)return -1;if(t.created<e.created)return 1;return 0;case"ta":return e.title.localeCompare(t.title);case"td":return t.title.localeCompare(e.title);default:return 0}},[w,C]),O=(0,c.useMemo)(()=>new Set(n.flatMap(e=>e.labels)),[n]),[L,V]=(0,c.useState)(!1),[F,M]=(0,c.useState)(),[R,q]=(0,r.u)();return(0,i.jsxs)("div",{className:"w-full h-full flex flex-col  gap-y-10 px-4 py-2",children:[(0,i.jsxs)("div",{className:"flex flex-col  gap-x-2",children:[(0,i.jsx)(o.I,{onChange:e=>g(e.currentTarget.value),placeholder:"Search..."}),n.length>0&&(0,i.jsx)(_,{onSelectChange:e=>S(e),labels:Array.from(O),onChange:e=>b(e)})]}),(0,i.jsxs)("div",{ref:R,className:"w-full grid grid-cols-1 md:grid-cols-3 gap-4 h-full",children:[L&&Array(6).fill(0).map((e,t)=>(0,i.jsx)(I,{},t)),!F&&!L&&w.filter(E).filter(e=>{if(0===N.length)return!0;let t=new Set(e.labels);return N.some(e=>t.has(e))}).sort(T).map(e=>(0,i.jsx)(k,{note:e},e.id))]}),F&&(0,i.jsxs)("button",{className:"flex gap-x-2 text-red-400 items-center justify-center",onClick:()=>j(e=>!e),children:["An error occured: ",F," Retry ",(0,i.jsx)(u.Z,{})]}),(0,i.jsx)(f.q.div,{style:t,className:"w-full h-full fixed flex flex-col gap-y-3 top-0 left-0 z-50 px-4 bg-zinc-900",children:(0,i.jsx)(z,{refetch:()=>j(e=>!e)})})]})}},72875:function(e,t,l){l.d(t,{I:function(){return a}});var s=l(9268);l(86006);let a=e=>(0,s.jsx)("input",{...e,className:"p-4 my-2 rounded-md w-full bg-transparent text-white outline outline-2 outline-zinc-700 focus:outline-indigo-500 ".concat(e.className)})}}]);